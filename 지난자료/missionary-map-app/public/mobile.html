<!DOCTYPE html>
<html lang="ko" class="sl-theme-light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>í•œêµ­ê¸°ë…êµì¥ë¡œíšŒ ì„ êµì‚¬ íŒŒì†¡ì§€ë„ - ëª¨ë°”ì¼</title>
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  
  <!-- Shoelace CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/themes/light.css" />
  
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  
  <!-- ê¸°ë³¸ CSS -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/table.css">
  <link rel="stylesheet" href="css/popup.css">
  <link rel="stylesheet" href="css/component.css">
  <link rel="stylesheet" href="css/animation.css">
  
  <!-- ëª¨ë°”ì¼ ì „ìš© CSS (ë§ˆì§€ë§‰ì— ë¡œë“œí•˜ì—¬ ìš°ì„ ìˆœìœ„ í™•ë³´) -->
  <link rel="stylesheet" href="css/mobile.css">
  <link rel="stylesheet" href="css/mobile-detail.css">
  
  <!-- Shoelace JS -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.0/cdn/shoelace.js"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ëª¨ë°”ì¼ ì „ìš© ì¶”ê°€ ìŠ¤íƒ€ì¼ */
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
    }
    
    /* ëª¨ë°”ì¼ì—ì„œ í„°ì¹˜ ìµœì í™” */
    * {
      -webkit-tap-highlight-color: transparent;
    }
    
    /* ëª¨ë°”ì¼ì—ì„œ ìŠ¤í¬ë¡¤ ë¶€ë“œëŸ½ê²Œ */
    html {
      scroll-behavior: smooth;
    }
    
    /* ëª¨ë°”ì¼ ì „ìš© ì´ˆê¸° ìŠ¤íƒ€ì¼ */
    body.mobile-mode {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    /* ëª¨ë°”ì¼ ë¡œë”© ì¸ë””ì¼€ì´í„° */
    .mobile-loading {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999999;
      transition: opacity 0.5s ease;
    }
    
    .mobile-loading.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    .mobile-loading-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .glass-screen {
      position: fixed; top:0; left:0; width:100vw; height:100vh; z-index:99999;
      display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(18px) saturate(1.2);
      -webkit-backdrop-filter: blur(18px) saturate(1.2);
      transition: opacity 0.4s;
      padding-top: 32px;
      overflow-y: auto;
      padding-bottom: 40px;
    }
    .glass-card {
      background: rgba(255,255,255,0.45);
      border-radius: 22px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.12);
      border: 1.5px solid rgba(255,255,255,0.35);
      padding: 24px 12px 18px 12px;
      max-width: 95vw;
      width: 360px;
      margin: 0 auto 50px auto;
      font-size: 1.08em;
    }
    .glass-close-btn {
      position:absolute;top:18px;right:24px;font-size:1.7em;background:none;border:none;cursor:pointer;color:#333;z-index:2;
      background:rgba(255,255,255,0.35);border-radius:50%;width:38px;height:38px;display:flex;align-items:center;justify-content:center;
      box-shadow:0 2px 8px rgba(0,0,0,0.08);
    }
    .glass-title {
      font-weight:bold;font-size:1.08em;text-align:center;margin-bottom:16px;margin-top:8px;letter-spacing:-0.5px;
    }
    .glass-table {
      width:100%;border-collapse:collapse;font-size:1em;
    }
    .glass-table th, .glass-table td {
      padding:7px 4px;
      font-size:1em;
    }
    .glass-table th {
      color:#444;font-weight:600;background:rgba(255,255,255,0.18);
    }
    .glass-table td {
      color:#222;
    }
    .glass-table td.country-cell {
      word-break: keep-all;
      overflow-wrap: break-word;
    }
    @media (max-width: 400px) {
      .glass-card { width:98vw; }
    }
  </style>
</head>
<body class="mobile-mode">
  <!-- ëª¨ë°”ì¼ ì²«í™”ë©´(ëœë”©) -->
  <div id="mobile-landing" class="mobile-landing">
    <!-- ìƒë‹¨ ë°” -->
    <div class="mobile-landing-topbar">
      <div class="mobile-landing-topbar-content">
        <img src="logo.svg" alt="ë¡œê³ " class="mobile-landing-logo">
        <div class="mobile-landing-title">í•œêµ­ê¸°ë…êµì¥ë¡œíšŒ ì„ êµì‚¬ íŒŒì†¡ì§€ë„</div>
      </div>
    </div>
    
    <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
    <div class="mobile-landing-info">
      <div class="mobile-landing-date" id="current-date">2024ë…„ 6ì›” í˜„ì¬</div>
      <div class="mobile-landing-stats">
        <div class="stat-item">
          <div class="stat-label">êµ­ê°€ë³„ íŒŒì†¡ í˜„í™©</div>
          <div class="stat-content">ë°ì´í„° ë¡œë”© ì¤‘...</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">ë…¸íšŒë³„ íŒŒì†¡ í˜„í™©</div>
          <div class="stat-content">ë°ì´í„° ë¡œë”© ì¤‘...</div>
        </div>
      </div>
    </div>
    
    <!-- ì£¼ì„ ì²˜ë¦¬ëœ ì½˜í…ì¸ ë“¤ (ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥) -->
    <!--
    <div class="mobile-landing-intro">ì „ ì„¸ê³„ ì„ êµì‚¬ë‹˜ë“¤ì˜ ì‚¬ì—­ì„ í•œëˆˆì— ë³´ê³ ,<br>ê¸°ë„ë¡œ ë™ì°¸í•˜ì„¸ìš”!</div>
    <button class="mobile-landing-main-btn" id="landing-main-btn">ì§€ë„ì—ì„œ ì„ êµì‚¬ ë³´ê¸°</button>
    <div class="mobile-landing-sub-btns">
      <button class="mobile-landing-sub-btn" id="landing-country-btn">êµ­ê°€ë³„ ë³´ê¸°</button>
      <button class="mobile-landing-sub-btn" id="landing-presbytery-btn">ë…¸íšŒë³„ ë³´ê¸°</button>
      <button class="mobile-landing-sub-btn" id="landing-search-btn">ê²€ìƒ‰í•˜ê¸°</button>
    </div>
    <div class="mobile-landing-illust">
      <img src="https://cdn.jsdelivr.net/gh/ionic-team/ionicons@7.1.0/src/svg/earth-outline.svg" alt="ì§€ë„ ì¼ëŸ¬ìŠ¤íŠ¸" style="width:90px;opacity:0.7;">
    </div>
    <div class="mobile-landing-verse">ì˜¤ëŠ˜ì˜ ë§ì”€: <span>"ë„ˆí¬ëŠ” ì˜¨ ì²œí•˜ì— ë‹¤ë‹ˆë©° ë§Œë¯¼ì—ê²Œ ë³µìŒì„ ì „íŒŒí•˜ë¼" (ë§‰ 16:15)</span></div>
    <div class="mobile-landing-news">ìµœì‹  ì†Œì‹: <span>2024ë…„ 6ì›” ë‰´ìŠ¤ë ˆí„° ë°œí–‰!</span></div>
    <div class="mobile-landing-feature-cards">
      <div class="feature-card">ğŸ—ºï¸ ì§€ë„ì—ì„œ ì„ êµì‚¬ ì°¾ê¸°</div>
      <div class="feature-card">ğŸ™ ê¸°ë„ì œëª© ë‚¨ê¸°ê¸°</div>
      <div class="feature-card">ğŸ“Š êµ­ê°€ë³„ í†µê³„ ë³´ê¸°</div>
    </div>
    -->
    
    <div class="mobile-landing-bottom-nav">
      <button class="nav-btn active">í™ˆ</button>
      <button class="nav-btn">ì§€ë„</button>
      <button class="nav-btn">ê²€ìƒ‰</button>
      <button class="nav-btn">ë‰´ìŠ¤</button>
      <button class="nav-btn">ë‚´ ì •ë³´</button>
    </div>
  </div>

  <!-- ê¸°ì¡´ ì§€ë„/ë³¸ë¬¸ ë“±ì€ ì²«í™”ë©´ ì§„ì… ì‹œ ìˆ¨ê¹€ ì²˜ë¦¬ -->
  <div id="main-app-content" style="display:none;">
    <!-- ëª¨ë°”ì¼ ë¡œë”© ì¸ë””ì¼€ì´í„° -->
    <div id="mobile-loading" class="mobile-loading">
      <div class="mobile-loading-spinner"></div>
    </div>

    <!-- ì§€ë„ ì»¨í…Œì´ë„ˆ -->
    <div id="map"></div>
    
    <!-- ëª¨ë°”ì¼ íƒ€ì´í‹€ë°” -->
    <div class="mobile-titlebar">
      <div class="mobile-titlebar-inner">
        <div class="mobile-titlebar-logo">
          <img src="logo.svg" alt="ë¡œê³ " style="height: 1.2em;">
        </div>
        <div class="mobile-titlebar-title">
          ì„ êµì‚¬ íŒŒì†¡ì§€ë„
        </div>
      </div>
    </div>
    
    <!-- ëª¨ë°”ì¼ ì„ êµì‚¬ ìŠ¤ì™€ì´í¼ -->
    <div id="mobile-missionary-swiper">
      <div class="swiper">
        <div class="swiper-wrapper">
          <!-- ì„ êµì‚¬ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>
        <!-- Swiper ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="swiper-pagination"></div>
      </div>
      
      <!-- ë‹«ê¸° ë²„íŠ¼ -->
      <button class="close-mobile-swiper" id="close-mobile-swiper">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      
      <!-- í•˜ë‹¨ íŒíŠ¸ ì´ë¯¸ì§€ -->
      <div class="bottom-hint-image">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='none' stroke='rgba(255,255,255,0.3)' stroke-width='2'/%3E%3Cpath d='M30 50 L45 65 L70 35' stroke='rgba(255,255,255,0.6)' stroke-width='3' fill='none'/%3E%3C/svg%3E" alt="íŒíŠ¸">
      </div>
    </div>
    
    <!-- ëª¨ë°”ì¼ ê²€ìƒ‰ ì»¨í…Œì´ë„ˆ -->
    <div class="mobile-search-container" id="mobile-search-container">
      <div class="mobile-search-input-wrapper">
        <span class="mobile-search-icon">ğŸ”</span>
        <input type="text" id="mobile-missionary-search" placeholder="ì„ êµì‚¬ ì´ë¦„, êµ­ê°€, ê¸°ê´€ì„ ê²€ìƒ‰í•˜ì„¸ìš”..." autocomplete="off">
        <button type="button" class="mobile-search-clear" id="mobile-search-clear">âœ•</button>
      </div>
      <div id="mobile-search-results" class="mobile-search-results-dropdown"></div>
    </div>
    
    <!-- ëª¨ë°”ì¼ UI ì»¨íŠ¸ë¡¤ -->
    <div id="mobile-ui-controls">
      <sl-icon-button id="mobileSettingsBtn" name="gear-fill" label="ì„¤ì •" style="font-size: 1.2rem;"></sl-icon-button>
      <sl-icon-button id="mobileFullscreenBtn" name="fullscreen" label="ì „ì²´í™”ë©´" style="font-size: 1.2rem;"></sl-icon-button>
    </div>
    
    <!-- ëª¨ë°”ì¼ ìƒì„¸ë³´ê¸° íŒì—… -->
    <div id="mobile-detail-popup" class="mobile-detail-popup">
      <div class="mobile-detail-content">
        <!-- ìƒì„¸ ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
      </div>
      <button class="mobile-detail-close" id="mobile-detail-close">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <!-- ëª¨ë°”ì¼ í…Œì´ë¸” ì˜¤ë²„ë ˆì´ -->
    <div id="mobile-missionary-table-country" class="mobile-country-table-overlay"></div>
    <div id="mobile-missionary-table-presbytery" class="mobile-presbytery-table-overlay"></div>
    
    <!-- ëª¨ë°”ì¼ ì¢…ë£Œ ë²„íŠ¼ë“¤ -->
    <sl-button id="mobile-country-exit-btn" variant="danger" size="medium" pill class="mobile-exit-btn">
      <sl-icon slot="prefix" name="arrow-left"></sl-icon>
      êµ­ê°€ë³„ ë³´ê¸° ì¢…ë£Œ
    </sl-button>
    
    <sl-button id="mobile-presbytery-exit-btn" variant="danger" size="medium" pill class="mobile-exit-btn">
      <sl-icon slot="prefix" name="arrow-left"></sl-icon>
      ë…¸íšŒë³„ ë³´ê¸° ì¢…ë£Œ
    </sl-button>
    
    <!-- ëª¨ë°”ì¼ ê°€ì´ë“œ ë©”ì‹œì§€ -->
    <div id="mobile-map-guide" class="mobile-map-guide">
      ì´ ì§€ë„ëŠ” ì „ì„¸ê³„ì— í©ì–´ì ¸ ì„ êµì‚¬ì—­ì„ ê°ë‹¹í•˜ê³  ìˆëŠ” ì´íšŒíŒŒì†¡ í•´ì™¸ì„ êµë™ì—­ìë‹˜ë“¤ì˜ í˜„í™©ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.<br>
      ê·€í•œ ì„ êµì‚¬ì—­ì„ ìœ„í•´ ê¸°ë„ë¡œ í•¨ê»˜ í•˜ì—¬ ì£¼ì‹œê¸°ë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
    </div>
    
    <!-- ëª¨ë°”ì¼ ë‰´ìŠ¤ë°” -->
    <div id="mobile-news-bar" class="mobile-news-bar">
      <div class="mobile-news-content">
        <span class="mobile-news-text">ìµœì‹  ì„ êµ ì†Œì‹ì„ í™•ì¸í•˜ì„¸ìš”</span>
      </div>
      <button class="mobile-news-close" id="mobile-news-close">âœ•</button>
    </div>
    
    <!-- ëª¨ë°”ì¼ ê¸°ë„ í™•ì¸ í† ìŠ¤íŠ¸ -->
    <div id="mobile-prayer-toast" class="mobile-prayer-toast">
      <div class="mobile-toast-content">
        <span class="mobile-toast-icon">ğŸ™</span>
        <div class="mobile-toast-text">
          <div class="mobile-toast-main">ê¸°ë„ê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤</div>
          <div class="mobile-toast-sub">í•¨ê»˜ ê¸°ë„í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  
  <!-- ê¸°ë³¸ ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="js/utils.js"></script>
  
  <!-- ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ë“¤ -->
  <script src="js/dataManager.js"></script>
  <script src="js/countryBackgrounds.js"></script>
  <script src="js/ui/CountryStatsDetail.js"></script>
  <script src="js/ui/PresbyteryStatsDetail.js"></script>
  <script src="js/setup.js?v=1.0.2"></script>
  <script src="js/uiManager.js?v=1.0.2"></script>
  <script src="js/missionaryMap.js?v=1.0.2"></script>
  <script src="js/globalSearch.js?v=1.0.2"></script>
  <script src="js/news.js?v=1.0.2"></script>
  
  <!-- UI ì»´í¬ë„ŒíŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="js/ui/detailPopup.js?v=1.0.2"></script>
  <script src="js/ui/mobileDetailPopup.js?v=1.0.1"></script>
  <script src="js/ui/MobileMissionarySwiper.js?v=1.0.1"></script>
  
  <!-- ëª¨ë°”ì¼ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // ëª¨ë°”ì¼ ì „ìš© ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ëª¨ë°”ì¼ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
      
      // ëª¨ë°”ì¼ í™˜ê²½ ê°ì§€
      if (window.innerWidth <= 900) {
        document.body.classList.add('mobile-mode');
        console.log('ëª¨ë°”ì¼ ëª¨ë“œ í™œì„±í™”');
      }
      
      // ë¡œë”© ì¸ë””ì¼€ì´í„° ìˆ¨ê¸°ê¸°
      setTimeout(() => {
        const loading = document.getElementById('mobile-loading');
        if (loading) {
          loading.classList.add('hidden');
          setTimeout(() => {
            loading.style.display = 'none';
          }, 500);
        }
      }, 1000);
      
      // ëª¨ë°”ì¼ ì „ìš© ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
      initializeMobileUI();
      
      // êµ­ê°€ë³„/ë…¸íšŒë³„ í˜„í™© stat-item í´ë¦­ ì‹œ ìƒì„¸ ì˜¤ë²„ë ˆì´ í‘œì‹œ
      const statItems = document.querySelectorAll('.mobile-landing-stats .stat-item');
      if (statItems[0]) {
        statItems[0].addEventListener('click', function() {
          if (window.showCountryStatsDetail) window.showCountryStatsDetail();
        });
      }
      if (statItems[1]) {
        statItems[1].addEventListener('click', function() {
          if (window.showPresbyteryStatsDetail) window.showPresbyteryStatsDetail();
        });
      }
    });
    
    function initializeMobileUI() {
      console.log('ëª¨ë°”ì¼ UI ì´ˆê¸°í™” ì‹œì‘');
      
      // ëª¨ë°”ì¼ ìŠ¤ì™€ì´í¼ ë‹«ê¸°
      const closeSwiperBtn = document.getElementById('close-mobile-swiper');
      const mobileSwiper = document.getElementById('mobile-missionary-swiper');
      
      if (closeSwiperBtn && mobileSwiper) {
        closeSwiperBtn.addEventListener('click', function() {
          mobileSwiper.style.display = 'none';
          console.log('ëª¨ë°”ì¼ ìŠ¤ì™€ì´í¼ ë‹«ê¸°');
        });
      }
      
      // ëª¨ë°”ì¼ ìƒì„¸ë³´ê¸° ë‹«ê¸°
      const closeDetailBtn = document.getElementById('mobile-detail-close');
      const mobileDetailPopup = document.getElementById('mobile-detail-popup');
      
      if (closeDetailBtn && mobileDetailPopup) {
        closeDetailBtn.addEventListener('click', function() {
          mobileDetailPopup.classList.remove('show');
          console.log('ëª¨ë°”ì¼ ìƒì„¸ë³´ê¸° ë‹«ê¸°');
        });
      }
      
      // ëª¨ë°”ì¼ ë‰´ìŠ¤ë°” ë‹«ê¸°
      const closeNewsBtn = document.getElementById('mobile-news-close');
      const mobileNewsBar = document.getElementById('mobile-news-bar');
      
      if (closeNewsBtn && mobileNewsBar) {
        closeNewsBtn.addEventListener('click', function() {
          mobileNewsBar.style.display = 'none';
          console.log('ëª¨ë°”ì¼ ë‰´ìŠ¤ë°” ë‹«ê¸°');
        });
      }
      
      // ëª¨ë°”ì¼ ê²€ìƒ‰ ê¸°ëŠ¥
      const mobileSearchInput = document.getElementById('mobile-missionary-search');
      const mobileSearchClear = document.getElementById('mobile-search-clear');
      
      if (mobileSearchInput && mobileSearchClear) {
        mobileSearchClear.addEventListener('click', function() {
          mobileSearchInput.value = '';
          mobileSearchInput.focus();
          console.log('ëª¨ë°”ì¼ ê²€ìƒ‰ ì´ˆê¸°í™”');
        });
      }
      
      // ëª¨ë°”ì¼ ê²€ìƒ‰ ì…ë ¥ ì´ë²¤íŠ¸
      if (mobileSearchInput) {
        mobileSearchInput.addEventListener('input', function() {
          const query = this.value.trim();
          if (query.length > 0) {
            console.log('ëª¨ë°”ì¼ ê²€ìƒ‰:', query);
            // ê²€ìƒ‰ ê¸°ëŠ¥ì€ globalSearch.jsì—ì„œ ì²˜ë¦¬ë¨
          }
        });
      }
      
      console.log('ëª¨ë°”ì¼ UI ì´ˆê¸°í™” ì™„ë£Œ');
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì¶”ê°€ ì´ˆê¸°í™”
    window.addEventListener('load', function() {
      console.log('ëª¨ë°”ì¼ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
      
      // ëª¨ë°”ì¼ ìµœì í™” ì„¤ì •
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(function(err) {
          console.log('ServiceWorker ë“±ë¡ ì‹¤íŒ¨:', err);
        });
      }
    });

    // ì²«í™”ë©´ â†’ ì§€ë„í™”ë©´ ì „í™˜
    document.addEventListener('DOMContentLoaded', function() {
      const landing = document.getElementById('mobile-landing');
      const mainApp = document.getElementById('main-app-content');
      const mainBtn = document.getElementById('landing-main-btn');
      
      // í˜„ì¬ ë‚ ì§œ í‘œì‹œ
      const currentDate = document.getElementById('current-date');
      if (currentDate) {
        const now = new Date();
        const year = now.getFullYear();
        const month = now.getMonth() + 1;
        currentDate.textContent = `${year}ë…„ ${month}ì›” í˜„ì¬`;
      }
      
      // ì‹¤ì œ ë°ì´í„°ë¡œ í†µê³„ ì—…ë°ì´íŠ¸
      function updateStats() {
        console.log('í†µê³„ ì—…ë°ì´íŠ¸ ì‹œì‘...');
        
        if (window.DataManager && window.DataManager.state && window.DataManager.state.isDataReady) {
          const missionaries = window.DataManager.state.missionaries;
          const presbyteryStats = window.DataManager.getPresbyteryStats();
          const countryStats = window.DataManager.getCountryStats();
          
          console.log('ë°ì´í„° í™•ì¸:', {
            missionariesCount: missionaries.length,
            missionaries: missionaries.map(m => m.name),
            presbyteryStats: presbyteryStats,
            countryStats: countryStats
          });
          
          const totalMissionaries = missionaries.length;
          const totalPresbyteries = Object.keys(presbyteryStats).length;
          const totalCountries = Object.keys(countryStats).length;
          
          // ë…¸íšŒë³„ íŒŒì†¡ í˜„í™© ì—…ë°ì´íŠ¸ - ìˆ«ì ë³¼ë“œ ì²˜ë¦¬
          const presbyteryContent = document.querySelector('.stat-item:first-child .stat-content');
          if (presbyteryContent) {
            presbyteryContent.innerHTML = `<b>${totalPresbyteries}</b>ê°œ ë…¸íšŒê°€ ì´ <b>${totalMissionaries}</b>ëª…ì˜ ì„ êµì‚¬ë¥¼ íŒŒì†¡í•˜ì˜€ìŠµë‹ˆë‹¤.`;
          }
          
          // êµ­ê°€ë³„ íŒŒì†¡ í˜„í™© ì—…ë°ì´íŠ¸ - ìˆ«ì ë³¼ë“œ ì²˜ë¦¬
          const countryContent = document.querySelector('.stat-item:last-child .stat-content');
          if (countryContent) {
            countryContent.innerHTML = `<b>${totalMissionaries}</b>ëª…ì˜ ì„ êµì‚¬ê°€ <b>${totalCountries}</b>ê°œêµ­ì—ì„œ ì‚¬ì—­ì¤‘ì…ë‹ˆë‹¤.`;
          }
          
          console.log(`í†µê³„ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${totalMissionaries}ëª…, ${totalPresbyteries}ê°œ ë…¸íšŒ, ${totalCountries}ê°œêµ­`);
        } else {
          console.log('DataManagerê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•ŠìŒ');
          // ë¡œë”© ì¤‘ì„ì„ í‘œì‹œ
          const presbyteryContent = document.querySelector('.stat-item:first-child .stat-content');
          const countryContent = document.querySelector('.stat-item:last-child .stat-content');
          
          if (presbyteryContent) {
            presbyteryContent.textContent = 'ë°ì´í„° ë¡œë”© ì¤‘...';
          }
          if (countryContent) {
            countryContent.textContent = 'ë°ì´í„° ë¡œë”© ì¤‘...';
          }
        }
      }
      
      // DataManager ì´ˆê¸°í™” ë° ë°ì´í„° ë¡œë“œ
      function initializeDataManager() {
        if (window.DataManager) {
          console.log('DataManager ì´ˆê¸°í™” ì‹œì‘...');
          
          // ë°ì´í„° ë¡œë”© ì™„ë£Œ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
          window.DataManager.onDataReady(() => {
            console.log('DataManager onDataReady ì½œë°± ì‹¤í–‰');
            updateStats();
          });
          
          // ë°ì´í„° ë¡œë“œ ì‹œì‘
          window.DataManager.fetchData((error) => {
            if (error) {
              console.error('ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
            } else {
              console.log('DataManager fetchData ì™„ë£Œ');
              // fetchData ì™„ë£Œ í›„ì—ë„ í•œ ë²ˆ ë” ì—…ë°ì´íŠ¸ ì‹œë„
              setTimeout(updateStats, 500);
            }
          });
        } else {
          console.log('DataManagerê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•ŠìŒ, 1ì´ˆ í›„ ì¬ì‹œë„...');
          setTimeout(initializeDataManager, 1000);
        }
      }
      
      // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ ë°ì´í„° ë¡œë“œ ì‹œì‘
      initializeDataManager();
      
      // ì¶”ê°€ë¡œ 3ì´ˆ í›„ì—ë„ í•œ ë²ˆ ë” ì‹œë„ (ë°ì´í„° ë¡œë”©ì´ ëŠ¦ì„ ê²½ìš°)
      setTimeout(() => {
        if (window.DataManager && window.DataManager.state && window.DataManager.state.isDataReady) {
          updateStats();
        }
      }, 3000);
      
      if (mainBtn) {
        mainBtn.addEventListener('click', function() {
          landing.style.display = 'none';
          mainApp.style.display = '';
        });
      }
      // ì„œë¸Œ ë²„íŠ¼(êµ­ê°€ë³„/ë…¸íšŒë³„/ê²€ìƒ‰)ë„ í•„ìš”ì‹œ ì—°ê²° ê°€ëŠ¥
    });
  </script>
  <div id="country-stats-screen" class="glass-screen" style="display:none"></div>
  <div id="presbytery-stats-screen" class="glass-screen" style="display:none"></div>
</body>
</html> 